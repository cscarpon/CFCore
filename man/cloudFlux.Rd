% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cloudFlux.R
\docType{class}
\name{cloudFlux}
\alias{cloudFlux}
\alias{cloudFlux-class}
\title{cloudFlux reference class}
\description{
A mutable workflow container that orchestrates two-epoch point cloud change
processing in CFCore: mask generation, denoising, DTM/nDSM derivation, raster
alignment, and continuous difference computation.
}
\details{
This class is designed to reduce boilerplate for common two-epoch workflows.
For API-style usage, you can still call the underlying standalone functions
directly (\code{mask_pc()}, \code{noise_filter()}, \code{process_raster()}, \code{diff_ndsm()}, etc.).
}
\section{Fields}{

\describe{
\item{epsg}{\code{integer}. Working EPSG used for point clouds and masks.}
\item{resolution}{\code{numeric}. Raster resolution used for DTM/nDSM.}
\item{pc_source}{\code{spatial_container}. Source (earlier) epoch container.}
\item{pc_target}{\code{spatial_container}. Target (later) epoch container.}
\item{mask_union}{\code{terra::SpatVector}. Union mask used for raster masking/alignment.}
\item{aligned_ndsm}{\code{list}. Output of \code{process_raster()} for nDSM rasters.}
\item{aligned_dtm}{\code{list}. Output of \code{process_raster()} for DTM rasters.}
\item{ndsm_diff}{\code{terra::SpatRaster}. Continuous nDSM difference (target - source).}
\item{dtm_diff}{\code{terra::SpatRaster}. Continuous DTM difference (target - source).}
\item{timings}{\code{list}. Named timings captured during processing (optional).}
\item{icp_aligned_path}{\code{character}. Path to ICP-aligned output (if used).}
}
}

\section{Methods}{

\describe{
\item{initialize(...)}{Optionally loads LAS/LAZ, sets CRS, and can run the workflow.}
\item{run(...)}{Runs: masks, denoise, DTM, nDSM, align rasters, compute diffs.}
\item{run_all(...)}{Alias for \code{run()} (kept for compatibility).}
\item{build_masks()}{Computes 2D masks using \code{mask_pc()}.}
\item{denoise()}{Runs \code{noise_filter()} on both epochs.}
\item{build_rasters(resolution = self$resolution)}{Calls \code{to_dtm()} and \code{to_ndsm()} on both epochs.}
\item{icp_align_open3d(...)}{Optional Open3D ICP alignment via reticulate (aligns target to source).}
\item{align_rasters(method = "bilinear")}{Aligns DTM and nDSM rasters using \code{process_raster()}.}
\item{compute_diffs()}{Computes continuous differences and masks them to the union mask.}
\item{summary_stats()}{Returns \code{list(ndsm=..., dtm=...)} from \code{diff_summary_stats()}.}
\item{summary_by_breaks(breaks, unit = "m")}{Returns binned summaries via \code{diff_summary_by_breaks()}.}
\item{plot_hist(which = "ndsm", bins = 60, title = NULL)}{Histogram plot for a diff raster.}
\item{plot_binned(breaks, which = "ndsm", title = NULL)}{Binned bar plot for a diff raster.}
\item{map(...)}{Leaflet map via \code{displayMap()} using stored rasters/diffs.}
}
}

\keyword{internal}
