% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spatial_container.R
\docType{class}
\name{spatial_container}
\alias{spatial_container}
\alias{spatial_container-class}
\title{Spatial container for LiDAR point clouds, rasters, and vector layers}
\description{
A reference-class object used as a mutable state container for CloudFluxCore
workflows. The container can be initialized from a \code{.las} / \code{.laz} file or an
\code{.xyz} text file and stores derived products such as DTM and nDSM rasters,
spatial index geometry, and optional masks/buildings layers.
}
\details{
This class is intended to hold intermediate objects during processing.
For API usage, prefer passing and returning plain objects (e.g., \code{LAS},
\code{SpatRaster}, \code{sf}) from standalone functions, and use \code{spatial_container}
only as an orchestration/state convenience.
}
\section{Fields}{

\describe{
\item{xyz}{\code{data.frame}. Point data with columns \code{X}, \code{Y}, \code{Z} (if initialized from \code{.xyz}).}
\item{LPC}{\code{lidR::LAS}. LiDAR point cloud.}
\item{ndsm}{\code{terra::SpatRaster}. Derived nDSM, optionally clipped.}
\item{ndsm_raw}{\code{terra::SpatRaster}. Unclipped or pre-processed nDSM intermediate.}
\item{DTM}{\code{terra::SpatRaster}. Derived DTM, optionally clipped.}
\item{DTM_raw}{\code{terra::SpatRaster}. Unclipped DTM intermediate.}
\item{index}{\code{sf::sfc}. Spatial extent geometry (bounding box) for the point cloud.}
\item{mask}{\code{sf}. Optional polygon mask used for clipping rasters.}
\item{buildings}{\code{sf}. Optional building footprints.}
\item{filepath}{\code{character}. Source file path provided at initialization.}
\item{filename}{\code{character}. Basename of \code{filepath}.}
}
}

\section{Methods}{

\describe{
\item{initialize(file_path = character(0))}{Initialize the container from a \code{.las}, \code{.laz}, or \code{.xyz} file.}
\item{set_crs(crs)}{Assign/transform CRS on stored spatial objects.}
\item{get_data()}{Return the \code{xyz} data.frame.}
\item{get_lpc()}{Return the \code{LPC} LAS object.}
\item{to_xyz(path)}{Write \code{xyz} to a space-delimited XYZ file.}
\item{to_dtm(resolution = 1)}{Create a DTM from ground points and optionally clip by \code{mask}.}
\item{to_ndsm(resolution = 1)}{Create an nDSM using the stored DTM.}
\item{save_mask(path)}{Write \code{mask} to disk via \code{sf::st_write()}.}
\item{save_las(path)}{Write \code{LPC} to disk via \code{lidR::writeLAS()}.}
\item{save_dtm(path)}{Write \code{DTM} to disk via \code{terra::writeRaster()}.}
\item{save_ndsm(path)}{Write \code{ndsm} to disk via \code{terra::writeRaster()}.}
\item{save_sc(path)}{Serialize the full reference-class object via \code{save()}.}
}
}

\keyword{internal}
